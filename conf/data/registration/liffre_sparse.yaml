data:
  task: registration
  class: liffre.LiffreDataset
  dataroot: data
  name: Liffre
  self_supervised: False
  max_block_size: 7
  min_block_size: 2
  max_dist_overlap: 0.2
  tau_1: 0.5
  first_subsampling: 0.1
  is_online_matching: False
  num_pos_pairs: 30000
  pre_transform:
    - transform: GridSampling3D
      params:
        size: ${data.first_subsampling}
  train_transform:
    - transform: SaveOriginalPosId
    - transform: RandomNoise
      params:
        sigma: 0.03
        clip: 0.5
    - transform: Random3AxisRotation
      params:
        apply_rotation: True
        rot_x: 1
        rot_y: 1
        rot_z: 360
    - transform: XYZFeature
      params:
        add_x: True
        add_y: True
        add_z: True
    - transform: RandomScaleAnisotropic
      params:
        scales: [0.7, 1.3]
    - transform: AddSpecularity
      params:
        gamma: 40
    - transform: GridSampling3D
      params:
        size: ${data.first_subsampling}
        quantize_coords: True
        mode: "last"
    - transform: ShiftVoxels
    - transform: AddFeatByKey
      params:
        add_to_x: True
        feat_name: 'spec'
    - transform: Jitter
      params:
        p: 0.05

  test_transform:
    - transform: SaveOriginalPosId

    - transform: Random3AxisRotation
      params:
        apply_rotation: True
        rot_x: 1
        rot_y: 1
        rot_z: 360
    - transform: AddSpecularity
      params:
        gamma: 40
    - transform: XYZFeature
      params:
        add_x: True
        add_y: True
        add_z: True
    - transform: GridSampling3D
      params:
        size: ${data.first_subsampling}
        quantize_coords: True
        mode: "last"

    - transform: AddFeatByKey
      params:
        add_to_x: True
        feat_name: 'spec'
